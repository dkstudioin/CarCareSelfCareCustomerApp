{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\Devendra_React_WorkSpace\\\\CarCareSelfCareCustomerApp\\\\node_modules\\\\react-native-expandable-section-flatlist\\\\index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport LayoutAnimation from \"react-native-web/dist/exports/LayoutAnimation\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\n\nvar ExpandableList = function (_Component) {\n  _inherits(ExpandableList, _Component);\n\n  var _super = _createSuper(ExpandableList);\n\n  function ExpandableList(props) {\n    var _this;\n\n    _classCallCheck(this, ExpandableList);\n\n    _this = _super.call(this, props);\n\n    _this._keyExtractor = function (item, index) {\n      return index.toString();\n    };\n\n    _this.scrollToEnd = function (params) {\n      return _this.flatList.scrollToEnd(params);\n    };\n\n    _this.scrollToIndex = function (params) {\n      return _this.flatList.scrollToIndex(params);\n    };\n\n    _this.scrollToItem = function (params) {\n      return _this.flatList.scrollToItem(params);\n    };\n\n    _this.scrollToOffset = function (params) {\n      return _this.flatList.scrollToOffset(params);\n    };\n\n    _this.recordInteraction = function (params) {\n      return _this.flatList.recordInteraction();\n    };\n\n    _this.flashScrollIndicators = function (params) {\n      return _this.flatList.flashScrollIndicators();\n    };\n\n    _this.scrollToSection = function (_ref) {\n      var animated = _ref.animated,\n          section = _ref.section;\n      var offset = 0;\n\n      _this.layoutStore.forEach(function (item, index) {\n        if (index < section) {\n          offset = offset + item.layout.height;\n        }\n      });\n\n      _this.flatList.scrollToOffset({\n        animated: animated,\n        offset: offset\n      });\n    };\n\n    _this.setSectionState = function (index, state) {\n      _this.setState(function (s) {\n        var memberOpened = new Map(s.memberOpened);\n        memberOpened.set(index, state);\n        return {\n          memberOpened: memberOpened\n        };\n      });\n\n      LayoutAnimation.easeInEaseOut();\n    };\n\n    _this._onPress = function (i) {\n      _this.setState(function (state) {\n        var memberOpened = new Map(state.memberOpened);\n        memberOpened.set(i, !memberOpened.get(i));\n        return {\n          memberOpened: memberOpened\n        };\n      });\n\n      if (_this.props.headerOnPress) {\n        _this.props.headerOnPress(i, !!!_this.state.memberOpened.get(i));\n      }\n\n      LayoutAnimation.easeInEaseOut();\n    };\n\n    _this._itemLayout = function (e) {\n      var target = e.nativeEvent.target;\n\n      if (_this.layoutStore.filter(function (item) {\n        return item.target === target;\n      })[0]) {\n        _this.layoutStore = _this.layoutStore.map(function (item, index) {\n          if (item.target === target) return e.nativeEvent;\n          return item;\n        });\n      } else {\n        _this.layoutStore.push(e.nativeEvent);\n\n        _this.layoutStore.length === _this.props.dataSource.length && _this.layoutStore.sort(function (v1, v2) {\n          return v1.target - v2.target;\n        });\n      }\n    };\n\n    _this._renderItem = function (_ref2) {\n      var item = _ref2.item,\n          index = _ref2.index;\n      var _this$props = _this.props,\n          renderRow = _this$props.renderRow,\n          renderSectionHeaderX = _this$props.renderSectionHeaderX,\n          renderSectionFooterX = _this$props.renderSectionFooterX,\n          headerKey = _this$props.headerKey,\n          memberKey = _this$props.memberKey,\n          rowNumberCloseMode = _this$props.rowNumberCloseMode;\n      var sectionId = index;\n      var memberArr = item[memberKey] || [];\n\n      if (!_this.state.memberOpened.get(sectionId) && memberArr.length > rowNumberCloseMode) {\n        memberArr = memberArr.slice(0, rowNumberCloseMode);\n      }\n\n      return React.createElement(View, {\n        onLayout: _this._itemLayout,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this._onPress(sectionId);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }\n      }, renderSectionHeaderX ? renderSectionHeaderX(item[headerKey], sectionId, !!_this.state.memberOpened.get(sectionId)) : null), React.createElement(ScrollView, {\n        scrollEnabled: false,\n        contentContainerStyle: _this.props.rowEnabled ? styles.row : null,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }\n      }, memberArr.map(function (rowItem, rowId) {\n        return React.createElement(View, {\n          key: rowId,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 17\n          }\n        }, renderRow ? renderRow(rowItem, rowId, index) : null);\n      }), memberArr.length > 0 && renderSectionFooterX ? renderSectionFooterX(item, sectionId) : null));\n    };\n\n    _this._getItemLayout = function (data, index) {\n      var offset = 0;\n      var item_height = _this.layoutStore[index].layout.height;\n\n      _this.layoutStore.forEach(function (item) {\n        return offset = offset + item.layout.height;\n      });\n\n      _this.props.getItemLayout && _this.props.getItemLayout(data, index);\n      return {\n        length: item_height,\n        offset: offset,\n        index: index\n      };\n    };\n\n    _this.flatList;\n    _this.layoutStore = [];\n    var map = new Map();\n\n    if (props.openOptions) {\n      props.openOptions.forEach(function (item) {\n        return map.set(item, true);\n      });\n    }\n\n    _this.state = {\n      memberOpened: map\n    };\n    return _this;\n  }\n\n  _createClass(ExpandableList, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.dataSource.length !== prevProps.dataSource.length && this.props.isOpen) {\n        var map = new Map();\n        this.props.dataSource.forEach(function (item, i) {\n          return map.set(i, true);\n        });\n        this.setState({\n          memberOpened: map\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var dataSource = this.props.dataSource;\n      return React.createElement(FlatList, _extends({\n        keyExtractor: this._keyExtractor,\n        extraData: this.state,\n        initialNumToRender: dataSource.length || 0\n      }, this.props, {\n        ref: function ref(instance) {\n          return _this2.flatList = instance;\n        },\n        data: dataSource,\n        horizontal: false,\n        renderItem: this._renderItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 7\n        }\n      }));\n    }\n  }]);\n\n  return ExpandableList;\n}(Component);\n\nExpandableList.propTypes = {\n  dataSource: PropTypes.array.isRequired,\n  headerKey: PropTypes.string,\n  memberKey: PropTypes.string,\n  renderRow: PropTypes.func,\n  renderSectionHeaderX: PropTypes.func,\n  renderSectionFooterX: PropTypes.func,\n  headerOnPress: PropTypes.func,\n  isOpen: PropTypes.bool,\n  openOptions: PropTypes.array,\n  rowNumberCloseMode: PropTypes.number,\n  rowEnabled: PropTypes.bool\n};\nExpandableList.defaultProps = {\n  headerKey: 'header',\n  memberKey: 'member',\n  isOpen: false,\n  rowNumberCloseMode: 0,\n  rowEnabled: false\n};\nvar styles = StyleSheet.create({\n  row: {\n    flexDirection: 'row',\n    flexWrap: 'wrap'\n  }\n});\nexport default ExpandableList;","map":{"version":3,"sources":["E:/Devendra_React_WorkSpace/CarCareSelfCareCustomerApp/node_modules/react-native-expandable-section-flatlist/index.js"],"names":["React","Component","PropTypes","ExpandableList","props","_keyExtractor","item","index","toString","scrollToEnd","params","flatList","scrollToIndex","scrollToItem","scrollToOffset","recordInteraction","flashScrollIndicators","scrollToSection","animated","section","offset","layoutStore","forEach","layout","height","setSectionState","state","setState","s","memberOpened","Map","set","LayoutAnimation","easeInEaseOut","_onPress","i","get","headerOnPress","_itemLayout","e","target","nativeEvent","filter","map","push","length","dataSource","sort","v1","v2","_renderItem","renderRow","renderSectionHeaderX","renderSectionFooterX","headerKey","memberKey","rowNumberCloseMode","sectionId","memberArr","slice","rowEnabled","styles","row","rowItem","rowId","_getItemLayout","data","item_height","getItemLayout","openOptions","prevProps","isOpen","instance","propTypes","array","isRequired","string","func","bool","number","defaultProps","StyleSheet","create","flexDirection","flexWrap"],"mappings":";;;;;;;;;;;;;AAMA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;;;;;;;;;IAWMC,c;;;;;AAuBJ,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UAqBnBC,aArBmB,GAqBH,UAACC,IAAD,EAAOC,KAAP;AAAA,aAAiBA,KAAK,CAACC,QAAN,EAAjB;AAAA,KArBG;;AAAA,UAsBnBC,WAtBmB,GAsBL,UAACC,MAAD;AAAA,aAAY,MAAKC,QAAL,CAAcF,WAAd,CAA0BC,MAA1B,CAAZ;AAAA,KAtBK;;AAAA,UAuBnBE,aAvBmB,GAuBH,UAACF,MAAD;AAAA,aAAY,MAAKC,QAAL,CAAcC,aAAd,CAA4BF,MAA5B,CAAZ;AAAA,KAvBG;;AAAA,UAwBnBG,YAxBmB,GAwBJ,UAACH,MAAD;AAAA,aAAY,MAAKC,QAAL,CAAcE,YAAd,CAA2BH,MAA3B,CAAZ;AAAA,KAxBI;;AAAA,UAyBnBI,cAzBmB,GAyBF,UAACJ,MAAD;AAAA,aAAY,MAAKC,QAAL,CAAcG,cAAd,CAA6BJ,MAA7B,CAAZ;AAAA,KAzBE;;AAAA,UA0BnBK,iBA1BmB,GA0BC,UAACL,MAAD;AAAA,aAAY,MAAKC,QAAL,CAAcI,iBAAd,EAAZ;AAAA,KA1BD;;AAAA,UA2BnBC,qBA3BmB,GA2BK,UAACN,MAAD;AAAA,aAAY,MAAKC,QAAL,CAAcK,qBAAd,EAAZ;AAAA,KA3BL;;AAAA,UA6BnBC,eA7BmB,GA6BD,gBAA2B;AAAA,UAAxBC,QAAwB,QAAxBA,QAAwB;AAAA,UAAdC,OAAc,QAAdA,OAAc;AAC3C,UAAIC,MAAM,GAAG,CAAb;;AACA,YAAKC,WAAL,CAAiBC,OAAjB,CAAyB,UAAChB,IAAD,EAAOC,KAAP,EAAiB;AACxC,YAAIA,KAAK,GAAGY,OAAZ,EAAqB;AACnBC,UAAAA,MAAM,GAAGA,MAAM,GAAGd,IAAI,CAACiB,MAAL,CAAYC,MAA9B;AACD;AACF,OAJD;;AAKA,YAAKb,QAAL,CAAcG,cAAd,CAA6B;AAAEI,QAAAA,QAAQ,EAARA,QAAF;AAAYE,QAAAA,MAAM,EAANA;AAAZ,OAA7B;AACD,KArCkB;;AAAA,UAuCnBK,eAvCmB,GAuCD,UAAClB,KAAD,EAAQmB,KAAR,EAAkB;AAClC,YAAKC,QAAL,CAAc,UAACC,CAAD,EAAO;AACnB,YAAMC,YAAY,GAAG,IAAIC,GAAJ,CAAQF,CAAC,CAACC,YAAV,CAArB;AACAA,QAAAA,YAAY,CAACE,GAAb,CAAiBxB,KAAjB,EAAwBmB,KAAxB;AACA,eAAO;AAACG,UAAAA,YAAY,EAAZA;AAAD,SAAP;AACD,OAJD;;AAKAG,MAAAA,eAAe,CAACC,aAAhB;AACD,KA9CkB;;AAAA,UAgDnBC,QAhDmB,GAgDR,UAACC,CAAD,EAAO;AAChB,YAAKR,QAAL,CAAc,UAACD,KAAD,EAAW;AACvB,YAAMG,YAAY,GAAG,IAAIC,GAAJ,CAAQJ,KAAK,CAACG,YAAd,CAArB;AACAA,QAAAA,YAAY,CAACE,GAAb,CAAiBI,CAAjB,EAAoB,CAACN,YAAY,CAACO,GAAb,CAAiBD,CAAjB,CAArB;AACA,eAAO;AAAEN,UAAAA,YAAY,EAAZA;AAAF,SAAP;AACD,OAJD;;AAKA,UAAI,MAAKzB,KAAL,CAAWiC,aAAf,EAA8B;AAC5B,cAAKjC,KAAL,CAAWiC,aAAX,CAAyBF,CAAzB,EAA4B,CAAE,CAAC,CAAC,MAAKT,KAAL,CAAWG,YAAX,CAAwBO,GAAxB,CAA4BD,CAA5B,CAAhC;AACD;;AACDH,MAAAA,eAAe,CAACC,aAAhB;AACD,KA1DkB;;AAAA,UA4DnBK,WA5DmB,GA4DL,UAACC,CAAD,EAAO;AACnB,UAAMC,MAAM,GAAGD,CAAC,CAACE,WAAF,CAAcD,MAA7B;;AACA,UAAI,MAAKnB,WAAL,CAAiBqB,MAAjB,CAAwB,UAAApC,IAAI;AAAA,eAAIA,IAAI,CAACkC,MAAL,KAAgBA,MAApB;AAAA,OAA5B,EAAwD,CAAxD,CAAJ,EAAgE;AAC9D,cAAKnB,WAAL,GAAmB,MAAKA,WAAL,CAAiBsB,GAAjB,CAAqB,UAACrC,IAAD,EAAOC,KAAP,EAAiB;AACvD,cAAID,IAAI,CAACkC,MAAL,KAAgBA,MAApB,EAA4B,OAAOD,CAAC,CAACE,WAAT;AAC5B,iBAAOnC,IAAP;AACD,SAHkB,CAAnB;AAID,OALD,MAKO;AACL,cAAKe,WAAL,CAAiBuB,IAAjB,CAAsBL,CAAC,CAACE,WAAxB;;AACA,cAAKpB,WAAL,CAAiBwB,MAAjB,KAA4B,MAAKzC,KAAL,CAAW0C,UAAX,CAAsBD,MAAlD,IACA,MAAKxB,WAAL,CAAiB0B,IAAjB,CAAsB,UAACC,EAAD,EAAKC,EAAL;AAAA,iBAAYD,EAAE,CAACR,MAAH,GAAYS,EAAE,CAACT,MAA3B;AAAA,SAAtB,CADA;AAED;AACF,KAxEkB;;AAAA,UA0EnBU,WA1EmB,GA0EL,iBAAqB;AAAA,UAAlB5C,IAAkB,SAAlBA,IAAkB;AAAA,UAAZC,KAAY,SAAZA,KAAY;AAAA,wBAEG,MAAKH,KAFR;AAAA,UACzB+C,SADyB,eACzBA,SADyB;AAAA,UACdC,oBADc,eACdA,oBADc;AAAA,UACQC,oBADR,eACQA,oBADR;AAAA,UAC8BC,SAD9B,eAC8BA,SAD9B;AAAA,UAE/BC,SAF+B,eAE/BA,SAF+B;AAAA,UAEpBC,kBAFoB,eAEpBA,kBAFoB;AAGjC,UAAMC,SAAS,GAAGlD,KAAlB;AACA,UAAImD,SAAS,GAAGpD,IAAI,CAACiD,SAAD,CAAJ,IAAmB,EAAnC;;AACA,UAAI,CAAC,MAAK7B,KAAL,CAAWG,YAAX,CAAwBO,GAAxB,CAA4BqB,SAA5B,CAAD,IAA2CC,SAAS,CAACb,MAAV,GAAmBW,kBAAlE,EAAsF;AACpFE,QAAAA,SAAS,GAAGA,SAAS,CAACC,KAAV,CAAgB,CAAhB,EAAmBH,kBAAnB,CAAZ;AACD;;AAED,aACE,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,MAAKlB,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAKJ,QAAL,CAAcuB,SAAd,CAAN;AAAA,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACIL,oBAAoB,GAAGA,oBAAoB,CAAC9C,IAAI,CAACgD,SAAD,CAAL,EAAkBG,SAAlB,EACzC,CAAC,CAAC,MAAK/B,KAAL,CAAWG,YAAX,CAAwBO,GAAxB,CAA4BqB,SAA5B,CADuC,CAAvB,GAC0B,IAFlD,CADF,EAKE,oBAAC,UAAD;AACE,QAAA,aAAa,EAAE,KADjB;AAEE,QAAA,qBAAqB,EAAE,MAAKrD,KAAL,CAAWwD,UAAX,GAAwBC,MAAM,CAACC,GAA/B,GAAqC,IAF9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKIJ,SAAS,CAACf,GAAV,CAAc,UAACoB,OAAD,EAAUC,KAAV,EAAoB;AAChC,eACE,oBAAC,IAAD;AAAM,UAAA,GAAG,EAAEA,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGb,SAAS,GAAGA,SAAS,CAACY,OAAD,EAAUC,KAAV,EAAiBzD,KAAjB,CAAZ,GAAsC,IADlD,CADF;AAKD,OAND,CALJ,EAaImD,SAAS,CAACb,MAAV,GAAmB,CAAnB,IAAwBQ,oBAAxB,GAA+CA,oBAAoB,CAAC/C,IAAD,EAAOmD,SAAP,CAAnE,GAAuF,IAb3F,CALF,CADF;AAuBD,KA1GkB;;AAAA,UA4GnBQ,cA5GmB,GA4GF,UAACC,IAAD,EAAO3D,KAAP,EAAiB;AAChC,UAAIa,MAAM,GAAG,CAAb;AACA,UAAM+C,WAAW,GAAG,MAAK9C,WAAL,CAAiBd,KAAjB,EAAwBgB,MAAxB,CAA+BC,MAAnD;;AACA,YAAKH,WAAL,CAAiBC,OAAjB,CAAyB,UAAAhB,IAAI;AAAA,eAAIc,MAAM,GAAGA,MAAM,GAAGd,IAAI,CAACiB,MAAL,CAAYC,MAAlC;AAAA,OAA7B;;AACA,YAAKpB,KAAL,CAAWgE,aAAX,IAA4B,MAAKhE,KAAL,CAAWgE,aAAX,CAAyBF,IAAzB,EAA+B3D,KAA/B,CAA5B;AACA,aAAO;AAAEsC,QAAAA,MAAM,EAAEsB,WAAV;AAAuB/C,QAAAA,MAAM,EAAEA,MAA/B;AAAuCb,QAAAA,KAAK,EAALA;AAAvC,OAAP;AACD,KAlHkB;;AAEjB,UAAKI,QAAL;AACA,UAAKU,WAAL,GAAmB,EAAnB;AACA,QAAMsB,GAAG,GAAG,IAAIb,GAAJ,EAAZ;;AACA,QAAI1B,KAAK,CAACiE,WAAV,EAAuB;AACrBjE,MAAAA,KAAK,CAACiE,WAAN,CAAkB/C,OAAlB,CAA0B,UAAChB,IAAD;AAAA,eAAUqC,GAAG,CAACZ,GAAJ,CAAQzB,IAAR,EAAc,IAAd,CAAV;AAAA,OAA1B;AACD;;AACD,UAAKoB,KAAL,GAAa;AACXG,MAAAA,YAAY,EAAEc;AADH,KAAb;AARiB;AAWlB;;;;uCAEkB2B,S,EAAW;AAC5B,UAAI,KAAKlE,KAAL,CAAW0C,UAAX,CAAsBD,MAAtB,KAAiCyB,SAAS,CAACxB,UAAV,CAAqBD,MAAtD,IAAgE,KAAKzC,KAAL,CAAWmE,MAA/E,EAAuF;AACrF,YAAM5B,GAAG,GAAG,IAAIb,GAAJ,EAAZ;AACA,aAAK1B,KAAL,CAAW0C,UAAX,CAAsBxB,OAAtB,CAA8B,UAAChB,IAAD,EAAO6B,CAAP;AAAA,iBAAaQ,GAAG,CAACZ,GAAJ,CAAQI,CAAR,EAAW,IAAX,CAAb;AAAA,SAA9B;AACA,aAAKR,QAAL,CAAc;AAAEE,UAAAA,YAAY,EAAEc;AAAhB,SAAd;AACD;AACF;;;6BAiGQ;AAAA;;AAAA,UACCG,UADD,GACgB,KAAK1C,KADrB,CACC0C,UADD;AAEP,aACE,oBAAC,QAAD;AACE,QAAA,YAAY,EAAE,KAAKzC,aADrB;AAEE,QAAA,SAAS,EAAE,KAAKqB,KAFlB;AAGE,QAAA,kBAAkB,EAAEoB,UAAU,CAACD,MAAX,IAAqB;AAH3C,SAIM,KAAKzC,KAJX;AAKE,QAAA,GAAG,EAAE,aAAAoE,QAAQ;AAAA,iBAAI,MAAI,CAAC7D,QAAL,GAAgB6D,QAApB;AAAA,SALf;AAOE,QAAA,IAAI,EAAE1B,UAPR;AAQE,QAAA,UAAU,EAAE,KARd;AASE,QAAA,UAAU,EAAE,KAAKI,WATnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF;AAaD;;;;EA1J0BjD,S;;AAAvBE,c,CACGsE,S,GAAY;AACjB3B,EAAAA,UAAU,EAAE5C,SAAS,CAACwE,KAAV,CAAgBC,UADX;AAEjBrB,EAAAA,SAAS,EAAEpD,SAAS,CAAC0E,MAFJ;AAGjBrB,EAAAA,SAAS,EAAErD,SAAS,CAAC0E,MAHJ;AAIjBzB,EAAAA,SAAS,EAAEjD,SAAS,CAAC2E,IAJJ;AAKjBzB,EAAAA,oBAAoB,EAAElD,SAAS,CAAC2E,IALf;AAMjBxB,EAAAA,oBAAoB,EAAEnD,SAAS,CAAC2E,IANf;AAOjBxC,EAAAA,aAAa,EAAEnC,SAAS,CAAC2E,IAPR;AAQjBN,EAAAA,MAAM,EAAErE,SAAS,CAAC4E,IARD;AASjBT,EAAAA,WAAW,EAAEnE,SAAS,CAACwE,KATN;AAUjBlB,EAAAA,kBAAkB,EAAEtD,SAAS,CAAC6E,MAVb;AAWjBnB,EAAAA,UAAU,EAAE1D,SAAS,CAAC4E;AAXL,C;AADf3E,c,CAeG6E,Y,GAAe;AACpB1B,EAAAA,SAAS,EAAE,QADS;AAEpBC,EAAAA,SAAS,EAAE,QAFS;AAGpBgB,EAAAA,MAAM,EAAE,KAHY;AAIpBf,EAAAA,kBAAkB,EAAE,CAJA;AAKpBI,EAAAA,UAAU,EAAE;AALQ,C;AA8IxB,IAAMC,MAAM,GAAGoB,UAAU,CAACC,MAAX,CAAkB;AAChCpB,EAAAA,GAAG,EAAE;AACJqB,IAAAA,aAAa,EAAE,KADX;AAEJC,IAAAA,QAAQ,EAAE;AAFN;AAD2B,CAAlB,CAAf;AAOA,eAAejF,cAAf","sourcesContent":["/*\n * https://github.com/facebook/react-native\n * Copyright cuiyueshuai\n * @author cuiyueshuai<850705402@qq.com>\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  View,\n  Text,\n  FlatList,\n  ScrollView,\n  LayoutAnimation,\n  TouchableOpacity,\n  StyleSheet,\n} from 'react-native';\n\nclass ExpandableList extends Component {\n  static propTypes = {\n    dataSource: PropTypes.array.isRequired,\n    headerKey: PropTypes.string,\n    memberKey: PropTypes.string,\n    renderRow: PropTypes.func,\n    renderSectionHeaderX: PropTypes.func,\n    renderSectionFooterX: PropTypes.func,\n    headerOnPress: PropTypes.func,\n    isOpen: PropTypes.bool,\n    openOptions: PropTypes.array,\n    rowNumberCloseMode: PropTypes.number,\n    rowEnabled: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    headerKey: 'header',\n    memberKey: 'member',\n    isOpen: false,\n    rowNumberCloseMode: 0,\n    rowEnabled: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.flatList;\n    this.layoutStore = [];\n    const map = new Map();\n    if (props.openOptions) {\n      props.openOptions.forEach((item) => map.set(item, true))\n    }\n    this.state = {\n      memberOpened: map\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.dataSource.length !== prevProps.dataSource.length && this.props.isOpen) {\n      const map = new Map();\n      this.props.dataSource.forEach((item, i) => map.set(i, true));\n      this.setState({ memberOpened: map });\n    }\n  }\n\n  _keyExtractor = (item, index) => index.toString();\n  scrollToEnd = (params) => this.flatList.scrollToEnd(params);\n  scrollToIndex = (params) => this.flatList.scrollToIndex(params);\n  scrollToItem = (params) => this.flatList.scrollToItem(params);\n  scrollToOffset = (params) => this.flatList.scrollToOffset(params);\n  recordInteraction = (params) => this.flatList.recordInteraction();\n  flashScrollIndicators = (params) => this.flatList.flashScrollIndicators();\n\n  scrollToSection = ({ animated, section }) => {\n    let offset = 0;\n    this.layoutStore.forEach((item, index) => {\n      if (index < section) {\n        offset = offset + item.layout.height\n      }\n    });\n    this.flatList.scrollToOffset({ animated, offset });\n  };\n\n  setSectionState = (index, state) => {\n    this.setState((s) => {\n      const memberOpened = new Map(s.memberOpened);\n      memberOpened.set(index, state); // toggle\n      return {memberOpened};\n    });\n    LayoutAnimation.easeInEaseOut();\n  };\n\n  _onPress = (i) => {\n    this.setState((state) => {\n      const memberOpened = new Map(state.memberOpened);\n      memberOpened.set(i, !memberOpened.get(i)); // toggle\n      return { memberOpened };\n    });\n    if (this.props.headerOnPress) {\n      this.props.headerOnPress(i, !(!!this.state.memberOpened.get(i)));\n    }\n    LayoutAnimation.easeInEaseOut();\n  };\n\n  _itemLayout = (e) => {\n    const target = e.nativeEvent.target;\n    if (this.layoutStore.filter(item => item.target === target)[0]) {\n      this.layoutStore = this.layoutStore.map((item, index) => {\n        if (item.target === target) return e.nativeEvent;\n        return item;\n      });\n    } else {\n      this.layoutStore.push(e.nativeEvent);\n      this.layoutStore.length === this.props.dataSource.length &&\n      this.layoutStore.sort((v1, v2) => v1.target - v2.target);\n    }\n  };\n\n  _renderItem = ({ item, index }) => { // eslint-disable-line\n    const { renderRow, renderSectionHeaderX, renderSectionFooterX, headerKey,\n      memberKey, rowNumberCloseMode } = this.props;\n    const sectionId = index;\n    let memberArr = item[memberKey] || [];\n    if (!this.state.memberOpened.get(sectionId) && memberArr.length > rowNumberCloseMode) {\n      memberArr = memberArr.slice(0, rowNumberCloseMode);\n    }\n\n    return (\n      <View onLayout={this._itemLayout}>\n        <TouchableOpacity onPress={() => this._onPress(sectionId)}>\n          { renderSectionHeaderX ? renderSectionHeaderX(item[headerKey], sectionId,\n              !!this.state.memberOpened.get(sectionId)) : null}\n        </TouchableOpacity>\n        <ScrollView\n          scrollEnabled={false}\n          contentContainerStyle={this.props.rowEnabled ? styles.row : null}\n        >\n          {\n            memberArr.map((rowItem, rowId) => {\n              return (\n                <View key={rowId}>\n                  {renderRow ? renderRow(rowItem, rowId, index) : null}\n                </View>\n              );\n            })\n          }\n          { memberArr.length > 0 && renderSectionFooterX ? renderSectionFooterX(item, sectionId) : null }\n        </ScrollView>\n      </View>\n    );\n  };\n\n  _getItemLayout = (data, index) => {\n    let offset = 0;\n    const item_height = this.layoutStore[index].layout.height;\n    this.layoutStore.forEach(item => offset = offset + item.layout.height);\n    this.props.getItemLayout && this.props.getItemLayout(data, index);\n    return { length: item_height, offset: offset, index };\n  };\n\n  render() {\n    const { dataSource } = this.props;\n    return (\n      <FlatList\n        keyExtractor={this._keyExtractor}\n        extraData={this.state}\n        initialNumToRender={dataSource.length || 0}\n        {...this.props}\n        ref={instance => this.flatList = instance}\n        // getItemLayout={this._getItemLayout}\n        data={dataSource}\n        horizontal={false}\n        renderItem={this._renderItem}\n      />\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n\trow: {\n\t\tflexDirection: 'row',\n\t\tflexWrap: 'wrap'\n\t}\n});\n\nexport default ExpandableList;\n"]},"metadata":{},"sourceType":"module"}